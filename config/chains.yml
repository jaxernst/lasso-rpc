# Livechain Chain Configuration
# Defines multiple RPC providers per blockchain for redundancy and speed optimization

chains:
  ethereum:
    chain_id: 1
    name: "Ethereum Mainnet"
    block_time: 12000 # Average block time in ms

    # Provider pool - multiple providers for redundancy
    providers:
      - id: "ethereum_ankr"
        name: "Ankr Public"
        priority: 1
        type: "public"
        url: "https://rpc.ankr.com/eth"
        api_key_required: false

      - id: "ethereum_llamarpc"
        name: "LlamaRPC"
        priority: 2
        type: "public"
        url: "https://eth.llamarpc.com"
        ws_url: "wss://eth.llamarpc.com"
        api_key_required: false

      - id: "ethereum_publicnode"
        name: "PublicNode"
        priority: 3
        type: "public"
        url: "https://ethereum-rpc.publicnode.com"
        ws_url: "wss://ethereum-rpc.publicnode.com"
        api_key_required: false

      - id: "ethereum_blastapi"
        name: "BlastAPI"
        priority: 4
        type: "public"
        url: "https://eth-mainnet.public.blastapi.io"
        ws_url: "wss://eth-mainnet.public.blastapi.io"
        api_key_required: false

    # Connection settings
    connection:
      heartbeat_interval: 30000
      reconnect_interval: 5000
      max_reconnect_attempts: 10

    # Aggregation settings
    aggregation:
      deduplication_window: 2000 # ms to wait for duplicate messages
      min_confirmations: 1 # minimum providers that must confirm
      max_providers: 3 # maximum concurrent providers to use
      max_cache_size: 10000 # maximum number of cached messages

    # Subscription failover settings (optional - will use defaults if not specified)
    failover:
      max_backfill_blocks: 100 # max blocks to backfill on provider failover
      backfill_timeout: 30000 # max time to spend backfilling (ms)
      enabled: true # enable/disable backfill feature

  base:
    chain_id: 8453
    name: "Base Mainnet"
    block_time: 2000

    providers:
      - id: "base_publicnode"
        name: "PublicNode"
        priority: 1
        type: "public"
        url: "https://base-rpc.publicnode.com"
        ws_url: "wss://base-rpc.publicnode.com"
        api_key_required: false

      - id: "base_ankr"
        name: "Ankr Base"
        priority: 2
        type: "public"
        url: "https://rpc.ankr.com/base"
        api_key_required: false

      - id: "base_blastapi"
        name: "BlastAPI Base"
        priority: 3
        type: "public"
        url: "https://base-mainnet.public.blastapi.io"
        ws_url: "wss://base-mainnet.public.blastapi.io"
        api_key_required: false

    connection:
      heartbeat_interval: 20000 # Base is faster, more frequent heartbeats
      reconnect_interval: 3000
      max_reconnect_attempts: 15

    aggregation:
      deduplication_window: 1000 # Faster chain, shorter window
      min_confirmations: 1
      max_providers: 4

  polygon:
    chain_id: 137
    name: "Polygon"
    block_time: 2100

    providers:
      - id: "polygon_blastapi"
        name: "BlastAPI Polygon"
        priority: 1
        type: "public"
        url: "https://polygon-mainnet.public.blastapi.io"
        ws_url: "wss://polygon-mainnet.public.blastapi.io"
        api_key_required: false

    connection:
      heartbeat_interval: 25000
      reconnect_interval: 4000
      max_reconnect_attempts: 12

    aggregation:
      deduplication_window: 1500
      min_confirmations: 1
      max_providers: 3

  arbitrum:
    chain_id: 42161
    name: "Arbitrum One"
    block_time: 1000 # Very fast blocks

    providers:
      - id: "arbitrum_official"
        name: "Arbitrum Official"
        priority: 1
        type: "public"
        url: "https://arb1.arbitrum.io/rpc"
        api_key_required: false

      - id: "arbitrum_blastapi"
        name: "BlastAPI Arbitrum"
        priority: 2
        type: "public"
        url: "https://arbitrum-one.public.blastapi.io"
        ws_url: "wss://arbitrum-one.public.blastapi.io"
        api_key_required: false

      - id: "arbitrum_ankr"
        name: "Ankr Arbitrum"
        priority: 3
        type: "public"
        url: "https://rpc.ankr.com/arbitrum"
        api_key_required: false

    connection:
      heartbeat_interval: 15000 # Very frequent for fast chain
      reconnect_interval: 2000
      max_reconnect_attempts: 20

    aggregation:
      deduplication_window: 500 # Very short for fast blocks
      min_confirmations: 1
      max_providers: 3

  optimism:
    chain_id: 10
    name: "Optimism Mainnet"
    block_time: 2000

    providers:
      - id: "optimism_ankr"
        name: "Ankr Optimism"
        priority: 1
        type: "public"
        url: "https://rpc.ankr.com/optimism"
        api_key_required: false

      - id: "optimism_publicnode"
        name: "PublicNode Optimism"
        priority: 2
        type: "public"
        url: "https://optimism-rpc.publicnode.com"
        ws_url: "wss://optimism-rpc.publicnode.com"
        api_key_required: false

      - id: "optimism_blastapi"
        name: "BlastAPI Optimism"
        priority: 3
        type: "public"
        url: "https://optimism-mainnet.public.blastapi.io"
        ws_url: "wss://optimism-mainnet.public.blastapi.io"
        api_key_required: false

    connection:
      heartbeat_interval: 20000
      reconnect_interval: 3000
      max_reconnect_attempts: 15

    aggregation:
      deduplication_window: 1000
      min_confirmations: 1
      max_providers: 3

# Global settings
global:
  # Health check configuration
  health_check:
    interval: 30000 # Health check every 30 seconds
    timeout: 10000 # 10 second timeout for health checks
    failure_threshold: 3 # Mark unhealthy after 3 failures
    recovery_threshold: 2 # Mark healthy after 2 successes

  # Provider management
  provider_management:
    auto_failover: true # Automatically failover on provider failure
    load_balancing: "priority" # priority, round_robin, latency_based

  # Message deduplication
  deduplication:
    enabled: true
    algorithm: "content_hash" # content_hash, block_hash, sequence_number
    cache_size: 10000 # Number of recent messages to cache
    cache_ttl: 60000 # Cache TTL in ms
