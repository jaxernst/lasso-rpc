# Livechain Chain Configuration
# Defines multiple RPC providers per blockchain for redundancy and speed optimization

chains:
  ethereum:
    chain_id: 1
    name: "Ethereum Mainnet"
    block_time: 12000 # Average block time in ms

    # Provider pool - multiple providers for redundancy
    providers:
      - id: "ethereum_infura"
        name: "Infura"
        priority: 1 # Lower number = higher priority
        type: "paid" # paid, public, dedicated
        url: "https://mainnet.infura.io/v3/${INFURA_API_KEY}"
        ws_url: "wss://mainnet.infura.io/ws/v3/${INFURA_API_KEY}"
        api_key_required: true
        rate_limit: 100000 # requests per day
        latency_target: 100 # target latency in ms
        reliability: 0.999 # expected uptime

      - id: "ethereum_alchemy"
        name: "Alchemy"
        priority: 2
        type: "paid"
        url: "https://eth-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}"
        ws_url: "wss://eth-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}"
        api_key_required: true
        rate_limit: 300000
        latency_target: 80
        reliability: 0.999

      - id: "ethereum_ankr"
        name: "Ankr Public"
        priority: 3
        type: "public"
        url: "https://rpc.ankr.com/eth"
        ws_url: "wss://rpc.ankr.com/eth/ws"
        api_key_required: false
        rate_limit: 500 # much lower for public
        latency_target: 200
        reliability: 0.95

      - id: "ethereum_llamarpc"
        name: "LlamaRPC"
        priority: 4
        type: "public"
        url: "https://eth.llamarpc.com"
        ws_url: "wss://eth.llamarpc.com"
        api_key_required: false
        rate_limit: 200
        latency_target: 300
        reliability: 0.90

    # Connection settings
    connection:
      heartbeat_interval: 30000
      reconnect_interval: 5000
      max_reconnect_attempts: 10

    # Aggregation settings
    aggregation:
      deduplication_window: 2000 # ms to wait for duplicate messages
      min_confirmations: 1 # minimum providers that must confirm
      max_providers: 3 # maximum concurrent providers to use
      max_cache_size: 10000 # maximum number of cached messages

    # Subscription failover settings (optional - will use defaults if not specified)
    failover:
      max_backfill_blocks: 100        # max blocks to backfill on provider failover
      backfill_timeout: 30000         # max time to spend backfilling (ms)
      enabled: true                   # enable/disable backfill feature

  base:
    chain_id: 8453
    name: "Base Mainnet"
    block_time: 2000

    providers:
      - id: "base_publicnode"
        name: "PublicNode"
        priority: 1
        type: "public"
        url: "https://base-rpc.publicnode.com"
        ws_url: "wss://base-rpc.publicnode.com"
        api_key_required: false
        rate_limit: 1000
        latency_target: 150
        reliability: 0.98

      - id: "base_ankr"
        name: "Ankr Base"
        priority: 2
        type: "public"
        url: "https://rpc.ankr.com/base"
        ws_url: "wss://rpc.ankr.com/base/ws"
        api_key_required: false
        rate_limit: 500
        latency_target: 200
        reliability: 0.95

    connection:
      heartbeat_interval: 20000 # Base is faster, more frequent heartbeats
      reconnect_interval: 3000
      max_reconnect_attempts: 15

    aggregation:
      deduplication_window: 1000 # Faster chain, shorter window
      min_confirmations: 1
      max_providers: 4

  polygon:
    chain_id: 137
    name: "Polygon"
    block_time: 2100

    providers:
      - id: "polygon_infura"
        name: "Infura Polygon"
        priority: 1
        type: "paid"
        url: "https://polygon-mainnet.infura.io/v3/${INFURA_API_KEY}"
        ws_url: "wss://polygon-mainnet.infura.io/ws/v3/${INFURA_API_KEY}"
        api_key_required: true
        rate_limit: 100000
        latency_target: 120
        reliability: 0.999

      - id: "polygon_alchemy"
        name: "Alchemy Polygon"
        priority: 2
        type: "paid"
        url: "https://polygon-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}"
        ws_url: "wss://polygon-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}"
        api_key_required: true
        rate_limit: 300000
        latency_target: 100
        reliability: 0.999

      - id: "polygon_ankr"
        name: "Ankr Polygon"
        priority: 3
        type: "public"
        url: "https://rpc.ankr.com/polygon"
        ws_url: "wss://rpc.ankr.com/polygon/ws"
        api_key_required: false
        rate_limit: 500
        latency_target: 250
        reliability: 0.93

    connection:
      heartbeat_interval: 25000
      reconnect_interval: 4000
      max_reconnect_attempts: 12

    aggregation:
      deduplication_window: 1500
      min_confirmations: 1
      max_providers: 3

  arbitrum:
    chain_id: 42161
    name: "Arbitrum One"
    block_time: 1000 # Very fast blocks

    providers:
      - id: "arbitrum_official"
        name: "Arbitrum Official"
        priority: 1
        type: "public"
        url: "https://arb1.arbitrum.io/rpc"
        ws_url: "wss://arb1.arbitrum.io/ws"
        api_key_required: false
        rate_limit: 1000
        latency_target: 150
        reliability: 0.98

      - id: "arbitrum_blastapi"
        name: "BlastAPI Arbitrum"
        priority: 2
        type: "public"
        url: "https://arbitrum-one.public.blastapi.io"
        ws_url: "wss://arbitrum-one.public.blastapi.io"
        api_key_required: false
        rate_limit: 500
        latency_target: 200
        reliability: 0.95

    connection:
      heartbeat_interval: 15000 # Very frequent for fast chain
      reconnect_interval: 2000
      max_reconnect_attempts: 20

    aggregation:
      deduplication_window: 500 # Very short for fast blocks
      min_confirmations: 1
      max_providers: 3

  optimism:
    chain_id: 10
    name: "Optimism Mainnet"
    block_time: 2000

    providers:
      - id: "optimism_infura"
        name: "Infura Optimism"
        priority: 1
        type: "paid"
        url: "https://optimism-mainnet.infura.io/v3/${INFURA_API_KEY}"
        ws_url: "wss://optimism-mainnet.infura.io/ws/v3/${INFURA_API_KEY}"
        api_key_required: true
        rate_limit: 100000
        latency_target: 110
        reliability: 0.999

      - id: "optimism_alchemy"
        name: "Alchemy Optimism"
        priority: 2
        type: "paid"
        url: "https://opt-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}"
        ws_url: "wss://opt-mainnet.g.alchemy.com/v2/${ALCHEMY_API_KEY}"
        api_key_required: true
        rate_limit: 300000
        latency_target: 90
        reliability: 0.999

      - id: "optimism_ankr"
        name: "Ankr Optimism"
        priority: 3
        type: "public"
        url: "https://rpc.ankr.com/optimism"
        ws_url: "wss://rpc.ankr.com/optimism/ws"
        api_key_required: false
        rate_limit: 500
        latency_target: 180
        reliability: 0.96

    connection:
      heartbeat_interval: 20000
      reconnect_interval: 3000
      max_reconnect_attempts: 15

    aggregation:
      deduplication_window: 1000
      min_confirmations: 1
      max_providers: 3

  bsc:
    chain_id: 56
    name: "BNB Smart Chain"
    block_time: 3000

    providers:
      - id: "bsc_binance"
        name: "Binance BSC"
        priority: 1
        type: "public"
        url: "https://bsc-dataseed1.binance.org"
        ws_url: "wss://bsc-ws-node.nariox.org:443/ws/v3"
        api_key_required: false
        rate_limit: 2000
        latency_target: 150
        reliability: 0.98

      - id: "bsc_ankr"
        name: "Ankr BSC"
        priority: 2
        type: "public"
        url: "https://rpc.ankr.com/bsc"
        ws_url: "wss://rpc.ankr.com/bsc/ws"
        api_key_required: false
        rate_limit: 500
        latency_target: 200
        reliability: 0.95

      - id: "bsc_nodereal"
        name: "NodeReal BSC"
        priority: 3
        type: "public"
        url: "https://bsc-mainnet.nodereal.io/v1/64a9df0874fb4a93b9d0a3849de012d3"
        ws_url: "wss://bsc-mainnet.nodereal.io/ws/v1/64a9df0874fb4a93b9d0a3849de012d3"
        api_key_required: false
        rate_limit: 1000
        latency_target: 170
        reliability: 0.97

    connection:
      heartbeat_interval: 25000
      reconnect_interval: 4000
      max_reconnect_attempts: 12

    aggregation:
      deduplication_window: 1500
      min_confirmations: 1
      max_providers: 3

  avalanche:
    chain_id: 43114
    name: "Avalanche C-Chain"
    block_time: 2000

    providers:
      - id: "avalanche_infura"
        name: "Infura Avalanche"
        priority: 1
        type: "paid"
        url: "https://avalanche-mainnet.infura.io/v3/${INFURA_API_KEY}"
        ws_url: "wss://avalanche-mainnet.infura.io/ws/v3/${INFURA_API_KEY}"
        api_key_required: true
        rate_limit: 100000
        latency_target: 120
        reliability: 0.999

      - id: "avalanche_ankr"
        name: "Ankr Avalanche"
        priority: 2
        type: "public"
        url: "https://rpc.ankr.com/avalanche"
        ws_url: "wss://rpc.ankr.com/avalanche/ws"
        api_key_required: false
        rate_limit: 500
        latency_target: 180
        reliability: 0.96

      - id: "avalanche_public"
        name: "Avalanche Public"
        priority: 3
        type: "public"
        url: "https://api.avax.network/ext/bc/C/rpc"
        ws_url: "wss://api.avax.network/ext/bc/C/ws"
        api_key_required: false
        rate_limit: 1000
        latency_target: 200
        reliability: 0.94

    connection:
      heartbeat_interval: 20000
      reconnect_interval: 3000
      max_reconnect_attempts: 15

    aggregation:
      deduplication_window: 1000
      min_confirmations: 1
      max_providers: 3

  zksync:
    chain_id: 324
    name: "zkSync Era"
    block_time: 1000

    providers:
      - id: "zksync_infura"
        name: "Infura zkSync"
        priority: 1
        type: "paid"
        url: "https://zksync-mainnet.infura.io/v3/${INFURA_API_KEY}"
        ws_url: "wss://zksync-mainnet.infura.io/ws/v3/${INFURA_API_KEY}"
        api_key_required: true
        rate_limit: 100000
        latency_target: 100
        reliability: 0.999

      - id: "zksync_ankr"
        name: "Ankr zkSync"
        priority: 2
        type: "public"
        url: "https://rpc.ankr.com/zksync_era"
        ws_url: "wss://rpc.ankr.com/zksync_era/ws"
        api_key_required: false
        rate_limit: 500
        latency_target: 150
        reliability: 0.96

      - id: "zksync_public"
        name: "zkSync Public"
        priority: 3
        type: "public"
        url: "https://mainnet.era.zksync.io"
        ws_url: "wss://mainnet.era.zksync.io/ws"
        api_key_required: false
        rate_limit: 1000
        latency_target: 180
        reliability: 0.95

    connection:
      heartbeat_interval: 15000
      reconnect_interval: 2000
      max_reconnect_attempts: 20

    aggregation:
      deduplication_window: 500
      min_confirmations: 1
      max_providers: 3

  linea:
    chain_id: 59144
    name: "Linea Mainnet"
    block_time: 12000

    providers:
      - id: "linea_infura"
        name: "Infura Linea"
        priority: 1
        type: "paid"
        url: "https://linea-mainnet.infura.io/v3/${INFURA_API_KEY}"
        ws_url: "wss://linea-mainnet.infura.io/ws/v3/${INFURA_API_KEY}"
        api_key_required: true
        rate_limit: 100000
        latency_target: 120
        reliability: 0.999

      - id: "linea_consensys"
        name: "Consensys Linea"
        priority: 2
        type: "public"
        url: "https://rpc.linea.build"
        ws_url: "wss://rpc.linea.build"
        api_key_required: false
        rate_limit: 1000
        latency_target: 150
        reliability: 0.97

    connection:
      heartbeat_interval: 30000
      reconnect_interval: 5000
      max_reconnect_attempts: 10

    aggregation:
      deduplication_window: 2000
      min_confirmations: 1
      max_providers: 2

  scroll:
    chain_id: 534352
    name: "Scroll Mainnet"
    block_time: 3000

    providers:
      - id: "scroll_ankr"
        name: "Ankr Scroll"
        priority: 1
        type: "public"
        url: "https://rpc.ankr.com/scroll"
        ws_url: "wss://rpc.ankr.com/scroll/ws"
        api_key_required: false
        rate_limit: 500
        latency_target: 200
        reliability: 0.95

      - id: "scroll_public"
        name: "Scroll Public"
        priority: 2
        type: "public"
        url: "https://rpc.scroll.io"
        ws_url: "wss://wss-rpc.scroll.io/ws"
        api_key_required: false
        rate_limit: 1000
        latency_target: 180
        reliability: 0.96

    connection:
      heartbeat_interval: 25000
      reconnect_interval: 4000
      max_reconnect_attempts: 12

    aggregation:
      deduplication_window: 1500
      min_confirmations: 1
      max_providers: 2

  mantle:
    chain_id: 5000
    name: "Mantle Network"
    block_time: 1000

    providers:
      - id: "mantle_public"
        name: "Mantle Public"
        priority: 1
        type: "public"
        url: "https://rpc.mantle.xyz"
        ws_url: "wss://ws.mantle.xyz"
        api_key_required: false
        rate_limit: 1000
        latency_target: 150
        reliability: 0.96

      - id: "mantle_ankr"
        name: "Ankr Mantle"
        priority: 2
        type: "public"
        url: "https://rpc.ankr.com/mantle"
        ws_url: "wss://rpc.ankr.com/mantle/ws"
        api_key_required: false
        rate_limit: 500
        latency_target: 200
        reliability: 0.94

    connection:
      heartbeat_interval: 15000
      reconnect_interval: 2000
      max_reconnect_attempts: 20

    aggregation:
      deduplication_window: 500
      min_confirmations: 1
      max_providers: 2

  blast:
    chain_id: 81457
    name: "Blast Mainnet"
    block_time: 2000

    providers:
      - id: "blast_infura"
        name: "Infura Blast"
        priority: 1
        type: "paid"
        url: "https://blast-mainnet.infura.io/v3/${INFURA_API_KEY}"
        ws_url: "wss://blast-mainnet.infura.io/ws/v3/${INFURA_API_KEY}"
        api_key_required: true
        rate_limit: 100000
        latency_target: 110
        reliability: 0.999

      - id: "blast_public"
        name: "Blast Public"
        priority: 2
        type: "public"
        url: "https://rpc.blast.io"
        ws_url: "wss://ws.blast.io"
        api_key_required: false
        rate_limit: 1000
        latency_target: 160
        reliability: 0.96

    connection:
      heartbeat_interval: 20000
      reconnect_interval: 3000
      max_reconnect_attempts: 15

    aggregation:
      deduplication_window: 1000
      min_confirmations: 1
      max_providers: 2

  mode:
    chain_id: 34443
    name: "Mode Network"
    block_time: 2000

    providers:
      - id: "mode_public"
        name: "Mode Public"
        priority: 1
        type: "public"
        url: "https://mainnet.mode.network"
        ws_url: "wss://ws.mainnet.mode.network"
        api_key_required: false
        rate_limit: 1000
        latency_target: 170
        reliability: 0.95

    connection:
      heartbeat_interval: 20000
      reconnect_interval: 3000
      max_reconnect_attempts: 15

    aggregation:
      deduplication_window: 1000
      min_confirmations: 1
      max_providers: 1

  fantom:
    chain_id: 250
    name: "Fantom Opera"
    block_time: 1000

    providers:
      - id: "fantom_ankr"
        name: "Ankr Fantom"
        priority: 1
        type: "public"
        url: "https://rpc.ankr.com/fantom"
        ws_url: "wss://rpc.ankr.com/fantom/ws"
        api_key_required: false
        rate_limit: 500
        latency_target: 180
        reliability: 0.95

      - id: "fantom_public"
        name: "Fantom Public"
        priority: 2
        type: "public"
        url: "https://rpc.ftm.tools"
        ws_url: "wss://wsapi.fantom.network"
        api_key_required: false
        rate_limit: 1000
        latency_target: 200
        reliability: 0.93

    connection:
      heartbeat_interval: 15000
      reconnect_interval: 2000
      max_reconnect_attempts: 20

    aggregation:
      deduplication_window: 500
      min_confirmations: 1
      max_providers: 2

  celo:
    chain_id: 42220
    name: "Celo Mainnet"
    block_time: 5000

    providers:
      - id: "celo_infura"
        name: "Infura Celo"
        priority: 1
        type: "paid"
        url: "https://celo-mainnet.infura.io/v3/${INFURA_API_KEY}"
        ws_url: "wss://celo-mainnet.infura.io/ws/v3/${INFURA_API_KEY}"
        api_key_required: true
        rate_limit: 100000
        latency_target: 140
        reliability: 0.999

      - id: "celo_ankr"
        name: "Ankr Celo"
        priority: 2
        type: "public"
        url: "https://rpc.ankr.com/celo"
        ws_url: "wss://rpc.ankr.com/celo/ws"
        api_key_required: false
        rate_limit: 500
        latency_target: 220
        reliability: 0.94

    connection:
      heartbeat_interval: 30000
      reconnect_interval: 5000
      max_reconnect_attempts: 10

    aggregation:
      deduplication_window: 2500
      min_confirmations: 1
      max_providers: 2

# Global settings
global:
  # Health check configuration
  health_check:
    interval: 30000 # Health check every 30 seconds
    timeout: 10000 # 10 second timeout for health checks
    failure_threshold: 3 # Mark unhealthy after 3 failures
    recovery_threshold: 2 # Mark healthy after 2 successes

  # Provider management
  provider_management:
    auto_failover: true # Automatically failover on provider failure
    load_balancing: "priority" # priority, round_robin, latency_based
    provider_rotation: 300000 # Rotate providers every 5 minutes for testing

  # Message deduplication
  deduplication:
    enabled: true
    algorithm: "content_hash" # content_hash, block_hash, sequence_number
    cache_size: 10000 # Number of recent messages to cache
    cache_ttl: 60000 # Cache TTL in ms
