# Lasso Chain Configuration
# Defines multiple RPC providers per blockchain for redundancy and speed optimization
#
# Adapter Configuration:
# Providers can specify adapter-specific configuration via the `adapter_config` field.
# This allows per-provider, per-chain customization of rate limits and capabilities.
#
# Common adapter_config options:
#   Alchemy:
#     - eth_get_logs_block_range: <number>  # Max block range for eth_getLogs (default: 10)
#   PublicNode:
#     - max_addresses_http: <number>        # Max addresses for eth_getLogs HTTP (default: 25)
#     - max_addresses_ws: <number>          # Max addresses for eth_getLogs WS (default: 20)
#   LlamaRPC / Merkle:
#     - max_block_range: <number>           # Max block range for eth_getLogs (default: 1000)

chains:
  ethereum:
    chain_id: 1
    name: "Ethereum Mainnet"

    # Provider health monitoring configuration
    monitoring:
      probe_interval_ms: 12000 # 12s - Ethereum's block time
      lag_threshold_blocks: 5 # Exclude if provider is 5+ blocks behind (~60s)

    # Per-method lag overrides for selection (higher tolerance for historical queries)
    selection:
      max_lag_blocks: 1

    providers:
      - id: "alchemy_ethereum"
        name: "Alchemy Ethereum"
        priority: 1
        type: "premium"
        url: "https://eth-mainnet.g.alchemy.com/v2/anmzB-zgYNuUVePd-IJ4C"
        ws_url: "wss://eth-mainnet.g.alchemy.com/v2/anmzB-zgYNuUVePd-IJ4C"
        api_key_required: true
      - id: "ethereum_llamarpc"
        name: "LlamaRPC"
        priority: 2
        type: "public"
        url: "https://eth.llamarpc.com"
        ws_url: "wss://eth.llamarpc.com"
        api_key_required: false

      - id: "ethereum_drpc"
        name: "DRPC Ethereum"
        priority: 3
        type: "public"
        url: "https://lb.drpc.live/ethereum/AsX7SwWUH0vGkFOHPHzUyaGtM9G3rgMR8LnWQrxF2MGT"
        ws_url: "wss://lb.drpc.live/ethereum/AsX7SwWUH0vGkFOHPHzUyaGtM9G3rgMR8LnWQrxF2MGT"
        api_key_required: false

      - id: "ethereum_publicnode"
        name: "PublicNode Ethereum"
        priority: 4
        type: "public"
        url: "https://ethereum-rpc.publicnode.com"
        ws_url: "wss://ethereum-rpc.publicnode.com"
        api_key_required: false

      - id: "ethereum_merkle"
        name: "Merkle Ethereum"
        priority: 5
        type: "public"
        url: "https://eth.merkle.io"
        api_key_required: false

      - id: "0xrpc_ethereum"
        name: "0xRPC Ethereum"
        priority: 6
        type: "public"
        url: "https://0xrpc.io/eth"
        ws_url: "wss://0xrpc.io/eth"
        api_key_required: false

      - id: "flashbots_ethereum"
        name: "Flashbots Ethereum"
        priority: 7
        type: "public"
        url: "https://rpc.flashbots.net/fast"
        api_key_required: false

      - id: "ethereum_1rpc"
        name: "1RPC Ethereum"
        priority: 5
        type: "public"
        url: "https://1rpc.io/eth"
        api_key_required: false

      - id: "lava_ethereum"
        name: "Lava Ethereum"
        priority: 6
        type: "public"
        url: "https://g.w.lavanet.xyz:443/gateway/eth/rpc-http/c8ce92e7c11c66d297bddc4c7315d677"
        ws_url: "wss://g.w.lavanet.xyz:443/gateway/eth/rpc/c8ce92e7c11c66d297bddc4c7315d677"
        api_key_required: false

      # Needs adapter for eth_getLogs params
      # - id: "ethereum_blastapi"
      #   name: "BlastAPI Ethereum"
      #   priority: 6
      #   type: "public"
      #   url: "https://ethereum.publicnode.com"
      #   ws_url: "wss://ethereum.publicnode.com"
      #   api_key_required: false

    connection:
      heartbeat_interval: 10000
      reconnect_interval: 5000
      max_reconnect_attempts: 10

    failover:
      max_backfill_blocks: 100
      backfill_timeout: 30000
      enabled: true

  base:
    chain_id: 8453
    name: "Base Mainnet"

    # Provider health monitoring configuration
    monitoring:
      probe_interval_ms: 6000 # 6s - probe every 3 blocks (2s block time)
      lag_threshold_blocks: 5 # Exclude if provider is 5+ blocks behind (~10s)

    # Per-method lag overrides for selection
    selection:
      max_lag_blocks: 5 # Default: stricter for L2 (faster blocks)

    providers:
      # - id: "alchemy_base"
      #   name: "Alchemy Base"
      #   priority: 1
      #   type: "premium"
      #   url: "https://base-mainnet.g.alchemy.com/v2/fNX8dFL_on49XdPAq4WmGJjxeQscfs0k"
      #   ws_url: "wss://base-mainnet.g.alchemy.com/v2/fNX8dFL_on49XdPAq4WmGJjxeQscfs0k"
      #   api_key_required: true
      #   # Alchemy Base free tier has 10 block limit for eth_getLogs
      #   adapter_config:
      #     eth_get_logs_block_range: 10

      - id: "base_llamarpc"
        name: "LlamaRPC Base"
        priority: 2
        type: "public"
        url: "https://base.llamarpc.com"
        ws_url: "wss://base.llamarpc.com"
        api_key_required: false

      - id: "base_official"
        name: "Base Official"
        priority: 3
        type: "public"
        url: "https://mainnet.base.org"
        api_key_required: false

      - id: "base_publicnode"
        name: "PublicNode Base"
        priority: 4
        type: "public"
        url: "https://base.publicnode.com"
        ws_url: "wss://base.publicnode.com"
        api_key_required: false

      - id: "base_drpc"
        name: "DRPC Base"
        priority: 5
        type: "public"
        url: "https://lb.drpc.live/base/AsX7SwWUH0vGkFOHPHzUyaGtM9G3rgMR8LnWQrxF2MGT"
        ws_url: "wss://lb.drpc.live/base/AsX7SwWUH0vGkFOHPHzUyaGtM9G3rgMR8LnWQrxF2MGT"
        api_key_required: false

      - id: "base_chainstack"
        name: "Chainstack Base"
        priority: 5
        type: "public"
        url: "https://base-mainnet.core.chainstack.com/23176815cc2d60f44ef134679c79ab8f"
        ws_url: "wss://base-mainnet.core.chainstack.com/23176815cc2d60f44ef134679c79ab8f"
        api_key_required: false

      # - id: "base_ankr"
      #   name: "Ankr Base"
      #   priority: 5
      #   type: "premium"
      #   url: "https://rpc.ankr.com/base"
      #   api_key_required: true

      - id: "base_1rpc"
        name: "1RPC Base"
        priority: 6
        type: "public"
        url: "https://1rpc.io/base"
        api_key_required: false

      - id: "lava_base"
        name: "Lava Base"
        priority: 7
        type: "public"
        url: "https://g.w.lavanet.xyz:443/gateway/base/rpc-http/c8ce92e7c11c66d297bddc4c7315d677"
        ws_url: "wss://g.w.lavanet.xyz:443/gateway/base/rpc/c8ce92e7c11c66d297bddc4c7315d677"
        api_key_required: false

    connection:
      heartbeat_interval: 10000
      reconnect_interval: 5000
      max_reconnect_attempts: 10

    failover:
      max_backfill_blocks: 100
      backfill_timeout: 30000
      enabled: true

  base_sepolia:
    chain_id: 84532
    name: "Base Sepolia"

    # Provider health monitoring configuration
    monitoring:
      probe_interval_ms: 6000 # 6s - probe every 3 blocks (2s block time)
      lag_threshold_blocks: 5 # Exclude if provider is 5+ blocks behind (~10s)

    # Per-method lag overrides for selection
    selection:
      max_lag_blocks: 5 # Default: stricter for L2 (faster blocks)

    providers:
      - id: "lava_base_sepolia"
        name: "Lava Base Sepolia"
        priority: 1
        type: "public"
        url: "https://g.w.lavanet.xyz:443/gateway/bases/rpc-http/c8ce92e7c11c66d297bddc4c7315d677"
        ws_url: "wss://g.w.lavanet.xyz:443/gateway/bases/rpc/c8ce92e7c11c66d297bddc4c7315d677"
        api_key_required: false

    connection:
      heartbeat_interval: 10000
      reconnect_interval: 5000
      max_reconnect_attempts: 10

    failover:
      max_backfill_blocks: 100
      backfill_timeout: 30000
      enabled: true
